#!/usr/bin/env sh

read -r -d '' files_to_download <<'EOF'
http://download.virtualbox.org/virtualbox/5.1.26/VirtualBox-5.1.26-117224-OSX.dmg
http://download.virtualbox.org/virtualbox/5.1.26/VirtualBox-5.1.26-117224-Win.exe
https://github.com/boot2docker/boot2docker/releases/download/v17.06.0-ce/boot2docker.iso
https://get.docker.com/builds/Darwin/x86_64/docker-17.06.0-ce.tgz
https://get.docker.com/builds/Windows/x86_64/docker-17.06.0-ce.zip
https://github.com/docker/compose/releases/download/1.14.0/docker-compose-Darwin-x86_64
https://github.com/docker/compose/releases/download/1.14.0/docker-compose-Windows-x86_64.exe
https://github.com/docker/machine/releases/download/v0.12.0/docker-machine-Darwin-x86_64
https://github.com/docker/machine/releases/download/v0.12.0/docker-machine-Windows-x86_64.exe
https://github.com/rprichard/winpty/releases/download/0.4.3/winpty-0.4.3-cygwin-2.8.0-ia32.tar.gz
http://dl.bintray.com/tombujok/babun/babun-1.2.0-dist.zip
EOF

while read -r file; do echo "Downloading $(basename ${file})..."; curl -fLO# "${file}"; done <<< "$files_to_download"

echo "Pulling and saving Docksal system images..."
fin docker pull docksal/dns:1.0
fin docker pull docksal/ssh-agent:1.0
fin docker pull docksal/vhost-proxy:1.1
fin docker save docksal/dns:1.0 docksal/ssh-agent:1.0 docksal/vhost-proxy:1.1 -o docksal-system-images.tar
echo "Pulling and saving Docksal default stack images..."
fin docker pull docksal/web:2.1-apache2.4
fin docker pull docksal/db:1.1-mysql-5.6
fin docker pull docksal/cli:1.3-php7
fin docker save docksal/web:2.1-apache2.4 docksal/db:1.1-mysql-5.6 docksal/cli:1.3-php7 -o docksal-default-images.tar
